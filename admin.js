const a0_0xcc31d3=a0_0x3930;(function(_0x39e12a,_0x3984fd){const _0x4836cd=a0_0x3930,_0x17c708=_0x39e12a();while(!![]){try{const _0x21703f=parseInt(_0x4836cd(0x16e))/0x1+-parseInt(_0x4836cd(0x15a))/0x2+parseInt(_0x4836cd(0x18f))/0x3*(-parseInt(_0x4836cd(0x17a))/0x4)+parseInt(_0x4836cd(0x18b))/0x5+parseInt(_0x4836cd(0x169))/0x6+parseInt(_0x4836cd(0x14b))/0x7+parseInt(_0x4836cd(0x16c))/0x8*(-parseInt(_0x4836cd(0x16a))/0x9);if(_0x21703f===_0x3984fd)break;else _0x17c708['push'](_0x17c708['shift']());}catch(_0x19dee0){_0x17c708['push'](_0x17c708['shift']());}}}(a0_0x44f8,0xce63c));function a0_0x44f8(){const _0x110bcc=['8892432GCLMzu','2114703SRQJdX','Unauthorized','104jissjM','lineNumber','1167717ktckIu','all','canvasName','.submission-checkbox','student-btn','hidden','projectNumber','fix-file-template',',\x20eligible\x20','change','visible','.toggle-details','1792476YYGemD','createElement','uk-margin-left','name','value','fileName','listSubmissions','studentID','graded','length','localeCompare','content','trim','includes','submissionId','location','admin-table-body','6598140wwkXQi','split','addEventListener','eligiblePoints','3EzklzU','style','entries','filteredSubmissions','span','then','documentElement','toLowerCase','.student-id','href','click','add','Delete\x20Project\x20','deleteSubmission','push','line\x20','renderFixesGroupedByFile','classList','index.html',',\x20deduction\x20','10227588DGPYej','cloneNode','chevron-right','userHasTeam','appendChild','preventDefault','student-filter','textContent','dataset','querySelector','innerHTML','filter','confirmDelete','visibility','chevron-down','2164878mHybvs','deduction','checked','renderAdminTable','sub-details-','project-filter','allSubmissions','fixes','projnumber','<p>401\x20Unauthorized</p>','.file-name','getElementById','confirm','submission-details-template','$id'];a0_0x44f8=function(){return _0x110bcc;};return a0_0x44f8();}import{db}from'./submissionService.js';function a0_0x3930(_0xffe383,_0x51adb8){const _0x44f88c=a0_0x44f8();return a0_0x3930=function(_0x393098,_0x2cd52a){_0x393098=_0x393098-0x13e;let _0x4320c5=_0x44f88c[_0x393098];return _0x4320c5;},a0_0x3930(_0xffe383,_0x51adb8);}import{auth}from'./auth.js';class AdmninUI{constructor(){const _0x452f37=a0_0x3930;this[_0x452f37(0x160)]=null,document[_0x452f37(0x165)]('project-filter')['addEventListener'](_0x452f37(0x177),()=>this[_0x452f37(0x15d)]()),document[_0x452f37(0x165)]('student-filter')[_0x452f37(0x18d)]('input',()=>this['renderAdminTable']()),document[_0x452f37(0x165)]('clear-filters')[_0x452f37(0x18d)]('click',()=>{const _0x1b2c4b=_0x452f37;document['getElementById'](_0x1b2c4b(0x15f))[_0x1b2c4b(0x17e)]='all',document['getElementById']('student-filter')[_0x1b2c4b(0x17e)]='',this[_0x1b2c4b(0x15d)]();}),document[_0x452f37(0x165)](_0x452f37(0x172))[_0x452f37(0x18d)]('click',()=>{const _0x342d1c=_0x452f37;window[_0x342d1c(0x189)][_0x342d1c(0x140)]=_0x342d1c(0x149);});}async[a0_0xcc31d3(0x192)](){const _0x7e5f62=a0_0xcc31d3;this[_0x7e5f62(0x160)]===null&&(this[_0x7e5f62(0x160)]=await db[_0x7e5f62(0x180)]());let _0x38db2e=this['allSubmissions'];const _0x35430a=document[_0x7e5f62(0x165)](_0x7e5f62(0x15f))?.['value']??_0x7e5f62(0x16f),_0x74a003=document['getElementById'](_0x7e5f62(0x151))?.['value'][_0x7e5f62(0x13e)]()[_0x7e5f62(0x186)]()??'';_0x35430a!==_0x7e5f62(0x16f)&&(_0x38db2e=_0x38db2e['filter'](_0x588503=>String(_0x588503['projectNumber'])===_0x35430a));_0x74a003&&(_0x38db2e=_0x38db2e[_0x7e5f62(0x156)](_0x28fae1=>_0x28fae1[_0x7e5f62(0x170)][_0x7e5f62(0x13e)]()[_0x7e5f62(0x187)](_0x74a003)||String(_0x28fae1[_0x7e5f62(0x181)])[_0x7e5f62(0x187)](_0x74a003)));const _0x45f3b5=(_0x2c8096='')=>{const _0x94bb1d=_0x7e5f62,_0x218d67=_0x2c8096[_0x94bb1d(0x186)]()[_0x94bb1d(0x18c)](/\s+/);return _0x218d67['at'](-0x1)??'';};return _0x38db2e=[..._0x38db2e]['sort']((_0xeb71f1,_0x509625)=>{const _0x1fc448=_0x7e5f62,_0x415242=Number(_0xeb71f1[_0x1fc448(0x174)]),_0x3f6d86=Number(_0x509625['projectNumber']);if(_0x415242!==_0x3f6d86)return _0x415242-_0x3f6d86;return _0x45f3b5(_0xeb71f1[_0x1fc448(0x170)])[_0x1fc448(0x184)](_0x45f3b5(_0x509625[_0x1fc448(0x170)]));}),_0x38db2e;}async['renderAdminTable'](){const _0x136f74=a0_0xcc31d3,_0x72cca8=document[_0x136f74(0x165)](_0x136f74(0x18a));_0x72cca8[_0x136f74(0x155)]='';const _0xa991c=await auth['userHasTeam']('admin');if(!_0xa991c)return;const _0x3a4f74=document[_0x136f74(0x165)]('submission-row-template'),_0x577bbe=document[_0x136f74(0x165)](_0x136f74(0x167)),_0xf9a117=await this['filteredSubmissions']();_0xf9a117['forEach']((_0x46adcb,_0x397ae1)=>{const _0x4b5ce7=_0x136f74,_0x2d44de=_0x4b5ce7(0x15e)+_0x397ae1,_0x26ad2d=_0x3a4f74[_0x4b5ce7(0x185)]['cloneNode'](!![]),_0x532058=_0x26ad2d[_0x4b5ce7(0x154)]('tr'),_0x62bd29=_0x532058[_0x4b5ce7(0x154)](_0x4b5ce7(0x171));_0x62bd29[_0x4b5ce7(0x153)]['submissionId']=_0x46adcb['$id'],_0x62bd29[_0x4b5ce7(0x15c)]=_0x46adcb[_0x4b5ce7(0x182)],_0x532058[_0x4b5ce7(0x154)]('.project-number')[_0x4b5ce7(0x152)]=_0x46adcb['projectNumber'],_0x532058[_0x4b5ce7(0x154)]('.canvas-name')[_0x4b5ce7(0x152)]=_0x46adcb[_0x4b5ce7(0x170)],_0x532058[_0x4b5ce7(0x154)](_0x4b5ce7(0x13f))[_0x4b5ce7(0x152)]=_0x46adcb['studentID'];const _0xb0e7fa=_0x532058['querySelector'](_0x4b5ce7(0x179)),_0x1f98b4=_0xb0e7fa[_0x4b5ce7(0x154)](_0x4b5ce7(0x193)),_0x322071=_0x532058[_0x4b5ce7(0x154)]('.delete-submission');_0x322071['dataset']['id']=_0x46adcb[_0x4b5ce7(0x168)],_0x322071[_0x4b5ce7(0x153)][_0x4b5ce7(0x17d)]=_0x46adcb['canvasName'],_0x322071[_0x4b5ce7(0x153)][_0x4b5ce7(0x162)]=_0x46adcb[_0x4b5ce7(0x174)];const _0x2427de=_0x577bbe[_0x4b5ce7(0x185)][_0x4b5ce7(0x14c)](!![]),_0x4bd58d=_0x2427de[_0x4b5ce7(0x154)]('tr');_0x4bd58d['id']=_0x2d44de;const _0xa07d9f=_0x4bd58d[_0x4b5ce7(0x154)]('.fixes-container');this['renderFixesGroupedByFile'](_0x46adcb[_0x4b5ce7(0x161)]||[],_0xa07d9f),_0xb0e7fa[_0x4b5ce7(0x18d)](_0x4b5ce7(0x141),_0x3d2211=>{const _0x1f098c=_0x4b5ce7;_0x3d2211['preventDefault']();const _0x41de49=!_0x4bd58d[_0x1f098c(0x173)];_0x4bd58d[_0x1f098c(0x173)]=_0x41de49,_0x1f98b4['setAttribute']('uk-icon',_0x41de49?_0x1f098c(0x14d):_0x1f098c(0x159));}),_0x62bd29[_0x4b5ce7(0x18d)](_0x4b5ce7(0x177),async()=>{const _0x1bd579=_0x4b5ce7,_0x8e72d9=_0x62bd29[_0x1bd579(0x153)][_0x1bd579(0x188)];console['log'](_0x8e72d9,_0x62bd29[_0x1bd579(0x15c)]),db['updateSubmissionGraded'](_0x8e72d9,_0x62bd29[_0x1bd579(0x15c)]);}),_0x322071['addEventListener'](_0x4b5ce7(0x141),async _0x1db42e=>{const _0x564bad=_0x4b5ce7;_0x1db42e[_0x564bad(0x150)]();const _0x3f8044=await this[_0x564bad(0x157)](_0x46adcb[_0x564bad(0x168)],_0x46adcb);_0x3f8044&&(await db[_0x564bad(0x144)](_0x46adcb[_0x564bad(0x168)]),this[_0x564bad(0x15d)]());}),_0x72cca8[_0x4b5ce7(0x14f)](_0x532058),_0x72cca8[_0x4b5ce7(0x14f)](_0x4bd58d);});}[a0_0xcc31d3(0x147)](_0x3e5f0e,_0x2b700a){const _0x190440=a0_0xcc31d3;_0x2b700a[_0x190440(0x155)]='';if(!_0x3e5f0e[_0x190440(0x183)]){_0x2b700a[_0x190440(0x155)]='<em>No\x20fixes</em>';return;}const _0x3bab9b=document[_0x190440(0x165)](_0x190440(0x175)),_0x4bf21c={};for(const _0xbe55e of _0x3e5f0e){(_0x4bf21c[_0xbe55e[_0x190440(0x17f)]]??=[])[_0x190440(0x145)](_0xbe55e);}for(const [_0x299377,_0x559e21]of Object[_0x190440(0x191)](_0x4bf21c)){const _0x5ee137=_0x3bab9b[_0x190440(0x185)][_0x190440(0x14c)](!![]);_0x5ee137[_0x190440(0x154)](_0x190440(0x164))[_0x190440(0x152)]=_0x299377;const _0x284de1=_0x5ee137[_0x190440(0x154)]('ul');_0x559e21['forEach'](_0x2c2fa4=>{const _0x2e2eb8=_0x190440,_0x2af21e=document[_0x2e2eb8(0x17b)]('li');_0x2af21e[_0x2e2eb8(0x148)]['add'](_0x2e2eb8(0x17c)),_0x2c2fa4[_0x2e2eb8(0x18e)]===0x0&&_0x2af21e[_0x2e2eb8(0x148)][_0x2e2eb8(0x142)]('uk-text-muted'),_0x2af21e[_0x2e2eb8(0x152)]=_0x2e2eb8(0x146)+_0x2c2fa4[_0x2e2eb8(0x16d)]+_0x2e2eb8(0x14a)+_0x2c2fa4[_0x2e2eb8(0x15b)]+_0x2e2eb8(0x176)+_0x2c2fa4[_0x2e2eb8(0x18e)],_0x284de1['appendChild'](_0x2af21e);}),_0x2b700a[_0x190440(0x14f)](_0x5ee137);}}async[a0_0xcc31d3(0x157)](_0x4a0727,_0x4dd490){const _0x469e40=a0_0xcc31d3,_0x53dc06=_0x469e40(0x143)+_0x4dd490['projectNumber']+'\x20submission\x20from\x20'+_0x4dd490[_0x469e40(0x170)]+'?';return new Promise(_0x153c46=>{const _0x583f21=_0x469e40;UIkit['modal'][_0x583f21(0x166)](_0x53dc06)[_0x583f21(0x194)](()=>_0x153c46(!![]),()=>_0x153c46(![]));});}}const adminUI=new AdmninUI();((async()=>{const _0x8aac0f=a0_0xcc31d3,_0x5ce563=await auth[_0x8aac0f(0x14e)]('admin');if(!_0x5ce563){document[_0x8aac0f(0x195)][_0x8aac0f(0x155)]=_0x8aac0f(0x163),document['title']=_0x8aac0f(0x16b);return;}document[_0x8aac0f(0x195)][_0x8aac0f(0x190)][_0x8aac0f(0x158)]=_0x8aac0f(0x178),adminUI[_0x8aac0f(0x15d)]();})());