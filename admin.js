const a0_0x41039b=a0_0x5b90;function a0_0x503e(){const _0x4b0cc1=['appendChild','add','change','Unauthorized','createElement','.submission-checkbox','projnumber','.fixes-container','querySelector','\x20submission\x20from\x20','updateSubmissionGraded','.file-name','includes','visibility','27915280QUrzxL','submission-details-template','length','split','allSubmissions','$id','entries','project-filter','style','chevron-down','name','admin-table-body','student-btn','visible','then','cloneNode','4hzkWBL','confirmDelete','sort','eligiblePoints','chevron-right','4ryKwQB','68201JUQbyF','forEach','line\x20','filter','1745330CopYXL','uk-icon','submissionId','4788888LkbSZj','fixes','title','addEventListener','uk-text-muted','student-filter','value','renderFixesGroupedByFile','studentID','userHasTeam','setAttribute','fix-file-template','1842402VdYjdH','content','location','canvasName','click','submission-row-template','dataset','push','renderAdminTable','confirm','filteredSubmissions','projectNumber','.project-number','deleteSubmission','.delete-submission','250875ZghoxK','checked','348BDNZvS','documentElement','getElementById',',\x20deduction\x20','clear-filters','admin','uk-margin-left','5724072szFydx','<p>401\x20Unauthorized</p>','.canvas-name','innerHTML','classList','textContent','index.html','trim','href','Delete\x20Project\x20','all','fileName','input','localeCompare'];a0_0x503e=function(){return _0x4b0cc1;};return a0_0x503e();}function a0_0x5b90(_0x30ac6c,_0xd288b8){const _0x503ee8=a0_0x503e();return a0_0x5b90=function(_0x5b90d7,_0x588023){_0x5b90d7=_0x5b90d7-0x1e1;let _0x132101=_0x503ee8[_0x5b90d7];return _0x132101;},a0_0x5b90(_0x30ac6c,_0xd288b8);}(function(_0x45a3af,_0xec5297){const _0x4d22b7=a0_0x5b90,_0x37d31a=_0x45a3af();while(!![]){try{const _0x4532c1=-parseInt(_0x4d22b7(0x207))/0x1*(-parseInt(_0x4d22b7(0x23c))/0x2)+-parseInt(_0x4d22b7(0x1f8))/0x3*(-parseInt(_0x4d22b7(0x1e4))/0x4)+parseInt(_0x4d22b7(0x1e9))/0x5+-parseInt(_0x4d22b7(0x209))/0x6*(-parseInt(_0x4d22b7(0x1e5))/0x7)+parseInt(_0x4d22b7(0x1ec))/0x8+parseInt(_0x4d22b7(0x210))/0x9+-parseInt(_0x4d22b7(0x22c))/0xa;if(_0x4532c1===_0xec5297)break;else _0x37d31a['push'](_0x37d31a['shift']());}catch(_0x542ea7){_0x37d31a['push'](_0x37d31a['shift']());}}}(a0_0x503e,0x7382f));import{db}from'./submissionService.js';import{auth}from'./auth.js';class AdmninUI{constructor(){const _0x4690f3=a0_0x5b90;this[_0x4690f3(0x230)]=null,document[_0x4690f3(0x20b)](_0x4690f3(0x233))[_0x4690f3(0x1ef)](_0x4690f3(0x220),()=>this[_0x4690f3(0x200)]()),document[_0x4690f3(0x20b)](_0x4690f3(0x1f1))['addEventListener'](_0x4690f3(0x21c),()=>this[_0x4690f3(0x200)]()),document[_0x4690f3(0x20b)](_0x4690f3(0x20d))[_0x4690f3(0x1ef)]('click',()=>{const _0x23238f=_0x4690f3;document[_0x23238f(0x20b)](_0x23238f(0x233))[_0x23238f(0x1f2)]=_0x23238f(0x21a),document[_0x23238f(0x20b)]('student-filter')[_0x23238f(0x1f2)]='',this[_0x23238f(0x200)]();}),document[_0x4690f3(0x20b)](_0x4690f3(0x238))['addEventListener'](_0x4690f3(0x1fc),()=>{const _0x50d42b=_0x4690f3;window[_0x50d42b(0x1fa)][_0x50d42b(0x218)]=_0x50d42b(0x216);});}async[a0_0x41039b(0x202)](){const _0x4e303f=a0_0x41039b;this[_0x4e303f(0x230)]===null&&(this[_0x4e303f(0x230)]=await db['listSubmissions']());let _0x3fc1a1=this[_0x4e303f(0x230)];const _0x389d74=document[_0x4e303f(0x20b)](_0x4e303f(0x233))?.[_0x4e303f(0x1f2)]??_0x4e303f(0x21a),_0xe955a6=document[_0x4e303f(0x20b)]('student-filter')?.[_0x4e303f(0x1f2)]['toLowerCase']()['trim']()??'';_0x389d74!=='all'&&(_0x3fc1a1=_0x3fc1a1[_0x4e303f(0x1e8)](_0x230e4b=>String(_0x230e4b[_0x4e303f(0x203)])===_0x389d74));_0xe955a6&&(_0x3fc1a1=_0x3fc1a1[_0x4e303f(0x1e8)](_0x135daa=>_0x135daa[_0x4e303f(0x1fb)]['toLowerCase']()['includes'](_0xe955a6)||String(_0x135daa[_0x4e303f(0x1f4)])[_0x4e303f(0x22a)](_0xe955a6)));const _0xccdf0b=(_0x13d090='')=>{const _0x212ae5=_0x4e303f,_0x14e854=_0x13d090[_0x212ae5(0x217)]()[_0x212ae5(0x22f)](/\s+/);return _0x14e854['at'](-0x1)??'';};return _0x3fc1a1=[..._0x3fc1a1][_0x4e303f(0x1e1)]((_0x4012f4,_0x3cafab)=>{const _0x408055=_0x4e303f,_0x5ad274=Number(_0x4012f4[_0x408055(0x203)]),_0x586446=Number(_0x3cafab[_0x408055(0x203)]);if(_0x5ad274!==_0x586446)return _0x5ad274-_0x586446;return _0xccdf0b(_0x4012f4[_0x408055(0x1fb)])[_0x408055(0x21d)](_0xccdf0b(_0x3cafab[_0x408055(0x1fb)]));}),_0x3fc1a1;}async[a0_0x41039b(0x200)](){const _0x466e58=a0_0x41039b,_0x4f8bcd=document[_0x466e58(0x20b)](_0x466e58(0x237));_0x4f8bcd['innerHTML']='';const _0x28a87b=await auth['userHasTeam'](_0x466e58(0x20e));if(!_0x28a87b)return;const _0xc64f02=document[_0x466e58(0x20b)](_0x466e58(0x1fd)),_0x5e2c36=document[_0x466e58(0x20b)](_0x466e58(0x22d)),_0x50b69a=await this['filteredSubmissions']();_0x50b69a[_0x466e58(0x1e6)]((_0x2a1435,_0x3fb6d3)=>{const _0x2d99ce=_0x466e58,_0x139f17='sub-details-'+_0x3fb6d3,_0x282d13=_0xc64f02[_0x2d99ce(0x1f9)][_0x2d99ce(0x23b)](!![]),_0x10ae04=_0x282d13[_0x2d99ce(0x226)]('tr'),_0x48a3f1=_0x10ae04[_0x2d99ce(0x226)](_0x2d99ce(0x223));_0x48a3f1['dataset'][_0x2d99ce(0x1eb)]=_0x2a1435[_0x2d99ce(0x231)],_0x48a3f1[_0x2d99ce(0x208)]=_0x2a1435['graded'],_0x10ae04['querySelector'](_0x2d99ce(0x204))[_0x2d99ce(0x215)]=_0x2a1435[_0x2d99ce(0x203)],_0x10ae04['querySelector'](_0x2d99ce(0x212))['textContent']=_0x2a1435['canvasName'],_0x10ae04[_0x2d99ce(0x226)]('.student-id')[_0x2d99ce(0x215)]=_0x2a1435['studentID'];const _0x4697c3=_0x10ae04[_0x2d99ce(0x226)]('.toggle-details'),_0x1438fb=_0x4697c3['querySelector']('span'),_0x9268e2=_0x10ae04[_0x2d99ce(0x226)](_0x2d99ce(0x206));_0x9268e2['dataset']['id']=_0x2a1435[_0x2d99ce(0x231)],_0x9268e2[_0x2d99ce(0x1fe)][_0x2d99ce(0x236)]=_0x2a1435[_0x2d99ce(0x1fb)],_0x9268e2[_0x2d99ce(0x1fe)][_0x2d99ce(0x224)]=_0x2a1435[_0x2d99ce(0x203)];const _0x2a1d72=_0x5e2c36['content'][_0x2d99ce(0x23b)](!![]),_0xf4a4d2=_0x2a1d72[_0x2d99ce(0x226)]('tr');_0xf4a4d2['id']=_0x139f17;const _0x127aa5=_0xf4a4d2[_0x2d99ce(0x226)](_0x2d99ce(0x225));this[_0x2d99ce(0x1f3)](_0x2a1435[_0x2d99ce(0x1ed)]||[],_0x127aa5),_0x4697c3[_0x2d99ce(0x1ef)]('click',_0x4d391a=>{const _0x13c443=_0x2d99ce;_0x4d391a['preventDefault']();const _0x13445f=!_0xf4a4d2['hidden'];_0xf4a4d2['hidden']=_0x13445f,_0x1438fb[_0x13c443(0x1f6)](_0x13c443(0x1ea),_0x13445f?_0x13c443(0x1e3):_0x13c443(0x235));}),_0x48a3f1[_0x2d99ce(0x1ef)]('change',async()=>{const _0x5e0b09=_0x2d99ce,_0x5f03fe=_0x48a3f1[_0x5e0b09(0x1fe)][_0x5e0b09(0x1eb)];console['log'](_0x5f03fe,_0x48a3f1[_0x5e0b09(0x208)]),db[_0x5e0b09(0x228)](_0x5f03fe,_0x48a3f1[_0x5e0b09(0x208)]);}),_0x9268e2[_0x2d99ce(0x1ef)]('click',async _0x4bff7c=>{const _0x1b89f3=_0x2d99ce;_0x4bff7c['preventDefault']();const _0x2a5ccf=await this[_0x1b89f3(0x23d)](_0x2a1435[_0x1b89f3(0x231)],_0x2a1435);_0x2a5ccf&&(await db[_0x1b89f3(0x205)](_0x2a1435[_0x1b89f3(0x231)]),this[_0x1b89f3(0x200)]());}),_0x4f8bcd[_0x2d99ce(0x21e)](_0x10ae04),_0x4f8bcd[_0x2d99ce(0x21e)](_0xf4a4d2);});}[a0_0x41039b(0x1f3)](_0x12e058,_0xed4f98){const _0xbd14bd=a0_0x41039b;_0xed4f98['innerHTML']='';if(!_0x12e058[_0xbd14bd(0x22e)]){_0xed4f98[_0xbd14bd(0x213)]='<em>No\x20fixes</em>';return;}const _0xf082f0=document[_0xbd14bd(0x20b)](_0xbd14bd(0x1f7)),_0x175230={};for(const _0x1fa04c of _0x12e058){(_0x175230[_0x1fa04c[_0xbd14bd(0x21b)]]??=[])[_0xbd14bd(0x1ff)](_0x1fa04c);}for(const [_0x18fa36,_0x3cee81]of Object[_0xbd14bd(0x232)](_0x175230)){const _0x2f0778=_0xf082f0[_0xbd14bd(0x1f9)][_0xbd14bd(0x23b)](!![]);_0x2f0778[_0xbd14bd(0x226)](_0xbd14bd(0x229))['textContent']=_0x18fa36;const _0xe9342b=_0x2f0778[_0xbd14bd(0x226)]('ul');_0x3cee81[_0xbd14bd(0x1e6)](_0x391f7f=>{const _0x4f61b1=_0xbd14bd,_0x2c1783=document[_0x4f61b1(0x222)]('li');_0x2c1783[_0x4f61b1(0x214)][_0x4f61b1(0x21f)](_0x4f61b1(0x20f)),_0x391f7f[_0x4f61b1(0x1e2)]===0x0&&_0x2c1783['classList']['add'](_0x4f61b1(0x1f0)),_0x2c1783[_0x4f61b1(0x215)]=_0x4f61b1(0x1e7)+_0x391f7f['lineNumber']+_0x4f61b1(0x20c)+_0x391f7f['deduction']+',\x20eligible\x20'+_0x391f7f['eligiblePoints'],_0xe9342b[_0x4f61b1(0x21e)](_0x2c1783);}),_0xed4f98[_0xbd14bd(0x21e)](_0x2f0778);}}async[a0_0x41039b(0x23d)](_0x389cac,_0x4a4803){const _0x29c04f=a0_0x41039b,_0x1f4e9f=_0x29c04f(0x219)+_0x4a4803[_0x29c04f(0x203)]+_0x29c04f(0x227)+_0x4a4803['canvasName']+'?';return new Promise(_0x5ef9de=>{const _0x2ebe75=_0x29c04f;UIkit['modal'][_0x2ebe75(0x201)](_0x1f4e9f)[_0x2ebe75(0x23a)](()=>_0x5ef9de(!![]),()=>_0x5ef9de(![]));});}}const adminUI=new AdmninUI();((async()=>{const _0x53370f=a0_0x41039b,_0x173d85=await auth[_0x53370f(0x1f5)]('admin');if(!_0x173d85){document['documentElement'][_0x53370f(0x213)]=_0x53370f(0x211),document[_0x53370f(0x1ee)]=_0x53370f(0x221);return;}document[_0x53370f(0x20a)][_0x53370f(0x234)][_0x53370f(0x22b)]=_0x53370f(0x239),adminUI[_0x53370f(0x200)]();})());