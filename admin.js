const a0_0x3ba3ab=a0_0x5a1c;function a0_0x5a1c(_0x24385e,_0x55985f){const _0x1a76f3=a0_0x1a76();return a0_0x5a1c=function(_0x5a1c96,_0x38203d){_0x5a1c96=_0x5a1c96-0xad;let _0xfdda43=_0x1a76f3[_0x5a1c96];return _0xfdda43;},a0_0x5a1c(_0x24385e,_0x55985f);}(function(_0x3033f8,_0x561dda){const _0x5d782b=a0_0x5a1c,_0x41a3b7=_0x3033f8();while(!![]){try{const _0x46cf89=-parseInt(_0x5d782b(0xcc))/0x1+parseInt(_0x5d782b(0xbf))/0x2+parseInt(_0x5d782b(0x106))/0x3*(-parseInt(_0x5d782b(0xec))/0x4)+parseInt(_0x5d782b(0xf3))/0x5*(-parseInt(_0x5d782b(0xd7))/0x6)+-parseInt(_0x5d782b(0xee))/0x7+parseInt(_0x5d782b(0xd8))/0x8+parseInt(_0x5d782b(0xb5))/0x9;if(_0x46cf89===_0x561dda)break;else _0x41a3b7['push'](_0x41a3b7['shift']());}catch(_0x24af16){_0x41a3b7['push'](_0x41a3b7['shift']());}}}(a0_0x1a76,0x2cffe));import{db}from'./submissionService.js';import{auth}from'./auth.js';function a0_0x1a76(){const _0x51a4f2=['uk-icon','visibility','.student-id','submissionId','renderAdminTable','.fixes-container','href','modal','clear-filters','includes','project-filter','span','getElementById','3gZWbVR','admin-table-body','Unauthorized','log','projnumber','.file-name','documentElement','<p>401\x20Unauthorized</p>','eligiblePoints','style','projectNumber','.canvas-name','studentID','5135013VDeHQu','submission-details-template','fix-file-template','student-filter','userHasTeam','<em>No\x20fixes</em>','click','\x20submission\x20from\x20','student-btn','.toggle-details','487958fSHWyE','forEach','sort','toLowerCase','fileName','value','push','.submission-checkbox','hidden','appendChild','change','canvasName','chevron-right','270908riESsp','filteredSubmissions','listSubmissions','allSubmissions','$id','name','fixes','length','textContent','admin','deleteSubmission','6yHuOcn','1626352rrAFqg','split','uk-margin-left','createElement','confirmDelete','.project-number','location','.delete-submission','checked','classList','add','content','localeCompare','uk-text-muted',',\x20deduction\x20','index.html','confirm','addEventListener','dataset','querySelector','721516UXMIVl','preventDefault','1056552YGCOjx','submission-row-template','filter','renderFixesGroupedByFile','line\x20','1156445XcfAOI','innerHTML','cloneNode','all','setAttribute','trim'];a0_0x1a76=function(){return _0x51a4f2;};return a0_0x1a76();}class AdmninUI{constructor(){const _0x2c75c7=a0_0x5a1c;this['allSubmissions']=null,document['getElementById'](_0x2c75c7(0x103))[_0x2c75c7(0xe9)](_0x2c75c7(0xc9),()=>this[_0x2c75c7(0xfd)]()),document['getElementById'](_0x2c75c7(0xb8))[_0x2c75c7(0xe9)]('input',()=>this[_0x2c75c7(0xfd)]()),document[_0x2c75c7(0x105)](_0x2c75c7(0x101))[_0x2c75c7(0xe9)]('click',()=>{const _0x84591a=_0x2c75c7;document[_0x84591a(0x105)](_0x84591a(0x103))[_0x84591a(0xc4)]=_0x84591a(0xf6),document[_0x84591a(0x105)](_0x84591a(0xb8))[_0x84591a(0xc4)]='',this['renderAdminTable']();}),document[_0x2c75c7(0x105)](_0x2c75c7(0xbd))[_0x2c75c7(0xe9)](_0x2c75c7(0xbb),()=>{const _0x513c02=_0x2c75c7;window[_0x513c02(0xde)][_0x513c02(0xff)]=_0x513c02(0xe7);});}async[a0_0x3ba3ab(0xcd)](){const _0x5beb4a=a0_0x3ba3ab;this[_0x5beb4a(0xcf)]===null&&(this[_0x5beb4a(0xcf)]=await db[_0x5beb4a(0xce)]());let _0x2ed60e=this[_0x5beb4a(0xcf)];const _0x24daf8=document[_0x5beb4a(0x105)]('project-filter')?.[_0x5beb4a(0xc4)]??_0x5beb4a(0xf6),_0x312e90=document[_0x5beb4a(0x105)](_0x5beb4a(0xb8))?.[_0x5beb4a(0xc4)][_0x5beb4a(0xc2)]()[_0x5beb4a(0xf8)]()??'';_0x24daf8!=='all'&&(_0x2ed60e=_0x2ed60e['filter'](_0x20b53b=>String(_0x20b53b[_0x5beb4a(0xb2)])===_0x24daf8));_0x312e90&&(_0x2ed60e=_0x2ed60e[_0x5beb4a(0xf0)](_0x3ed558=>_0x3ed558[_0x5beb4a(0xca)][_0x5beb4a(0xc2)]()[_0x5beb4a(0x102)](_0x312e90)||String(_0x3ed558[_0x5beb4a(0xb4)])[_0x5beb4a(0x102)](_0x312e90)));const _0x4526a1=(_0x173f49='')=>{const _0x5111f5=_0x5beb4a,_0x30b038=_0x173f49[_0x5111f5(0xf8)]()[_0x5111f5(0xd9)](/\s+/);return _0x30b038['at'](-0x1)??'';};return _0x2ed60e=[..._0x2ed60e][_0x5beb4a(0xc1)]((_0x51b30d,_0x1f3c46)=>{const _0x1a99e2=_0x5beb4a,_0x368143=Number(_0x51b30d['projectNumber']),_0x470ae0=Number(_0x1f3c46[_0x1a99e2(0xb2)]);if(_0x368143!==_0x470ae0)return _0x368143-_0x470ae0;return _0x4526a1(_0x51b30d[_0x1a99e2(0xca)])[_0x1a99e2(0xe4)](_0x4526a1(_0x1f3c46[_0x1a99e2(0xca)]));}),_0x2ed60e;}async[a0_0x3ba3ab(0xfd)](){const _0x4ed881=a0_0x3ba3ab,_0x2f72cf=document[_0x4ed881(0x105)](_0x4ed881(0x107));_0x2f72cf[_0x4ed881(0xf4)]='';const _0x205b39=await auth[_0x4ed881(0xb9)](_0x4ed881(0xd5));if(!_0x205b39)return;const _0x10a74f=document[_0x4ed881(0x105)](_0x4ed881(0xef)),_0x41a01a=document[_0x4ed881(0x105)](_0x4ed881(0xb6)),_0x321ba5=await this[_0x4ed881(0xcd)]();_0x321ba5[_0x4ed881(0xc0)]((_0x834090,_0x2a6630)=>{const _0x46b2a8=_0x4ed881,_0x3cc42b='sub-details-'+_0x2a6630,_0x5cf1aa=_0x10a74f[_0x46b2a8(0xe3)][_0x46b2a8(0xf5)](!![]),_0x424956=_0x5cf1aa[_0x46b2a8(0xeb)]('tr'),_0x11191d=_0x424956[_0x46b2a8(0xeb)](_0x46b2a8(0xc6));_0x11191d[_0x46b2a8(0xea)][_0x46b2a8(0xfc)]=_0x834090[_0x46b2a8(0xd0)],_0x11191d[_0x46b2a8(0xe0)]=_0x834090['graded'],_0x424956[_0x46b2a8(0xeb)](_0x46b2a8(0xdd))[_0x46b2a8(0xd4)]=_0x834090['projectNumber'],_0x424956['querySelector'](_0x46b2a8(0xb3))['textContent']=_0x834090[_0x46b2a8(0xca)],_0x424956[_0x46b2a8(0xeb)](_0x46b2a8(0xfb))[_0x46b2a8(0xd4)]=_0x834090[_0x46b2a8(0xb4)];const _0x511a6c=_0x424956[_0x46b2a8(0xeb)](_0x46b2a8(0xbe)),_0x23e245=_0x511a6c[_0x46b2a8(0xeb)](_0x46b2a8(0x104)),_0x3a5ef8=_0x424956[_0x46b2a8(0xeb)](_0x46b2a8(0xdf));_0x3a5ef8[_0x46b2a8(0xea)]['id']=_0x834090[_0x46b2a8(0xd0)],_0x3a5ef8[_0x46b2a8(0xea)][_0x46b2a8(0xd1)]=_0x834090[_0x46b2a8(0xca)],_0x3a5ef8[_0x46b2a8(0xea)][_0x46b2a8(0x10a)]=_0x834090[_0x46b2a8(0xb2)];const _0x5d6908=_0x41a01a[_0x46b2a8(0xe3)][_0x46b2a8(0xf5)](!![]),_0x45b457=_0x5d6908[_0x46b2a8(0xeb)]('tr');_0x45b457['id']=_0x3cc42b;const _0x54eb2a=_0x45b457[_0x46b2a8(0xeb)](_0x46b2a8(0xfe));this[_0x46b2a8(0xf1)](_0x834090[_0x46b2a8(0xd2)]||[],_0x54eb2a),_0x511a6c['addEventListener']('click',_0x2b5a08=>{const _0x5690cf=_0x46b2a8;_0x2b5a08[_0x5690cf(0xed)]();const _0x119552=!_0x45b457[_0x5690cf(0xc7)];_0x45b457['hidden']=_0x119552,_0x23e245[_0x5690cf(0xf7)](_0x5690cf(0xf9),_0x119552?_0x5690cf(0xcb):'chevron-down');}),_0x11191d[_0x46b2a8(0xe9)](_0x46b2a8(0xc9),async()=>{const _0x5f4b31=_0x46b2a8,_0x42fc26=_0x11191d[_0x5f4b31(0xea)]['submissionId'];console[_0x5f4b31(0x109)](_0x42fc26,_0x11191d['checked']),db['updateSubmissionGraded'](_0x42fc26,_0x11191d[_0x5f4b31(0xe0)]);}),_0x3a5ef8['addEventListener']('click',async _0x4b8fdb=>{const _0x283514=_0x46b2a8;_0x4b8fdb[_0x283514(0xed)]();const _0x8d5c1d=await this[_0x283514(0xdc)](_0x834090[_0x283514(0xd0)],_0x834090);_0x8d5c1d&&(await db[_0x283514(0xd6)](_0x834090[_0x283514(0xd0)]),this['renderAdminTable']());}),_0x2f72cf['appendChild'](_0x424956),_0x2f72cf['appendChild'](_0x45b457);});}['renderFixesGroupedByFile'](_0x320a0c,_0x19d3a7){const _0x1d2df7=a0_0x3ba3ab;_0x19d3a7[_0x1d2df7(0xf4)]='';if(!_0x320a0c[_0x1d2df7(0xd3)]){_0x19d3a7[_0x1d2df7(0xf4)]=_0x1d2df7(0xba);return;}const _0x931414=document[_0x1d2df7(0x105)](_0x1d2df7(0xb7)),_0x14c8bd={};for(const _0x136e6a of _0x320a0c){(_0x14c8bd[_0x136e6a[_0x1d2df7(0xc3)]]??=[])[_0x1d2df7(0xc5)](_0x136e6a);}for(const [_0x5d01d9,_0xf7de4a]of Object['entries'](_0x14c8bd)){const _0x3a60fc=_0x931414[_0x1d2df7(0xe3)][_0x1d2df7(0xf5)](!![]);_0x3a60fc['querySelector'](_0x1d2df7(0xad))['textContent']=_0x5d01d9;const _0xeefcd7=_0x3a60fc[_0x1d2df7(0xeb)]('ul');_0xf7de4a[_0x1d2df7(0xc0)](_0x1886ab=>{const _0x3843f9=_0x1d2df7,_0x1eabaf=document[_0x3843f9(0xdb)]('li');_0x1eabaf[_0x3843f9(0xe1)][_0x3843f9(0xe2)](_0x3843f9(0xda)),_0x1886ab['eligiblePoints']===0x0&&_0x1eabaf['classList'][_0x3843f9(0xe2)](_0x3843f9(0xe5)),_0x1eabaf[_0x3843f9(0xd4)]=_0x3843f9(0xf2)+_0x1886ab['lineNumber']+_0x3843f9(0xe6)+_0x1886ab['deduction']+',\x20eligible\x20'+_0x1886ab[_0x3843f9(0xb0)],_0xeefcd7[_0x3843f9(0xc8)](_0x1eabaf);}),_0x19d3a7[_0x1d2df7(0xc8)](_0x3a60fc);}}async[a0_0x3ba3ab(0xdc)](_0x152991,_0x3d77ed){const _0x1674d1=a0_0x3ba3ab,_0x101b27='Delete\x20Project\x20'+_0x3d77ed['projectNumber']+_0x1674d1(0xbc)+_0x3d77ed[_0x1674d1(0xca)]+'?';return new Promise(_0x2a99da=>{const _0x224413=_0x1674d1;UIkit[_0x224413(0x100)][_0x224413(0xe8)](_0x101b27)['then'](()=>_0x2a99da(!![]),()=>_0x2a99da(![]));});}}const adminUI=new AdmninUI();((async()=>{const _0x14d2f7=a0_0x3ba3ab,_0x5b5b04=await auth[_0x14d2f7(0xb9)](_0x14d2f7(0xd5));if(!_0x5b5b04){document['documentElement'][_0x14d2f7(0xf4)]=_0x14d2f7(0xaf),document['title']=_0x14d2f7(0x108);return;}document[_0x14d2f7(0xae)][_0x14d2f7(0xb1)][_0x14d2f7(0xfa)]='visible',adminUI[_0x14d2f7(0xfd)]();})());