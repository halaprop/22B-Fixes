const a0_0x1eeaca=a0_0xfe77;(function(_0x42fb8e,_0xb70e6d){const _0x36ffdb=a0_0xfe77,_0x5c344d=_0x42fb8e();while(!![]){try{const _0x289b81=parseInt(_0x36ffdb(0x1aa))/0x1*(-parseInt(_0x36ffdb(0x18f))/0x2)+-parseInt(_0x36ffdb(0x1ba))/0x3+parseInt(_0x36ffdb(0x18b))/0x4+parseInt(_0x36ffdb(0x17e))/0x5+parseInt(_0x36ffdb(0x18d))/0x6*(parseInt(_0x36ffdb(0x187))/0x7)+parseInt(_0x36ffdb(0x1b0))/0x8+-parseInt(_0x36ffdb(0x1b5))/0x9;if(_0x289b81===_0xb70e6d)break;else _0x5c344d['push'](_0x5c344d['shift']());}catch(_0x59bc25){_0x5c344d['push'](_0x5c344d['shift']());}}}(a0_0x3975,0x9a618));import{db}from'./submissionService.js';import{auth}from'./auth.js';class AdmninUI{constructor(){const _0x130015=a0_0xfe77;this[_0x130015(0x180)]=null,document['getElementById'](_0x130015(0x195))['addEventListener'](_0x130015(0x1be),()=>this[_0x130015(0x197)]()),document[_0x130015(0x19a)](_0x130015(0x19e))['addEventListener'](_0x130015(0x19c),()=>this[_0x130015(0x197)]()),document[_0x130015(0x19a)](_0x130015(0x1a1))['addEventListener'](_0x130015(0x166),()=>{const _0x2853e6=_0x130015;document[_0x2853e6(0x19a)](_0x2853e6(0x195))[_0x2853e6(0x17a)]=_0x2853e6(0x1ac),document[_0x2853e6(0x19a)](_0x2853e6(0x19e))[_0x2853e6(0x17a)]='',this['renderAdminTable']();}),document['getElementById'](_0x130015(0x1b3))[_0x130015(0x182)](_0x130015(0x166),()=>navigation['navigate']('./'));}async[a0_0x1eeaca(0x1b6)](){const _0x2636c6=a0_0x1eeaca;this[_0x2636c6(0x180)]===null&&(this[_0x2636c6(0x180)]=await db[_0x2636c6(0x191)]());let _0x3323fb=this[_0x2636c6(0x180)];const _0x12848a=document['getElementById'](_0x2636c6(0x195))?.[_0x2636c6(0x17a)]??'all',_0x149f11=document[_0x2636c6(0x19a)](_0x2636c6(0x19e))?.[_0x2636c6(0x17a)]['toLowerCase']()['trim']()??'';_0x12848a!==_0x2636c6(0x1ac)&&(_0x3323fb=_0x3323fb[_0x2636c6(0x17b)](_0x2718eb=>String(_0x2718eb[_0x2636c6(0x167)])===_0x12848a));_0x149f11&&(_0x3323fb=_0x3323fb[_0x2636c6(0x17b)](_0x2baad2=>_0x2baad2[_0x2636c6(0x1a3)][_0x2636c6(0x183)]()[_0x2636c6(0x1a2)](_0x149f11)||String(_0x2baad2['studentID'])['includes'](_0x149f11)));const _0x5e4e79=(_0x22be52='')=>{const _0x578635=_0x2636c6,_0x16a1b8=_0x22be52[_0x578635(0x19d)]()[_0x578635(0x17d)](/\s+/);return _0x16a1b8['at'](-0x1)??'';};return _0x3323fb=[..._0x3323fb][_0x2636c6(0x1a7)]((_0x280192,_0x175d72)=>{const _0x226748=_0x2636c6,_0x48490f=Number(_0x280192[_0x226748(0x167)]),_0x5046d9=Number(_0x175d72['projectNumber']);if(_0x48490f!==_0x5046d9)return _0x48490f-_0x5046d9;return _0x5e4e79(_0x280192[_0x226748(0x1a3)])['localeCompare'](_0x5e4e79(_0x175d72[_0x226748(0x1a3)]));}),_0x3323fb;}async['renderAdminTable'](){const _0x455d14=a0_0x1eeaca,_0x5e4dcb=document['getElementById'](_0x455d14(0x1b8));_0x5e4dcb[_0x455d14(0x18c)]='';const _0x5a32a8=await auth['userHasTeam'](_0x455d14(0x1bb));if(!_0x5a32a8)return;const _0x2b7d14=document[_0x455d14(0x19a)](_0x455d14(0x16e)),_0x3f9f3d=document[_0x455d14(0x19a)](_0x455d14(0x168)),_0x557ec4=await this['filteredSubmissions']();_0x557ec4[_0x455d14(0x1a9)]((_0x11b29b,_0x577419)=>{const _0x6c1fac=_0x455d14,_0x11e90e='sub-details-'+_0x577419,_0x2d2dca=_0x2b7d14['content'][_0x6c1fac(0x189)](!![]),_0x36c88b=_0x2d2dca[_0x6c1fac(0x163)]('tr'),_0x131652=_0x36c88b[_0x6c1fac(0x163)](_0x6c1fac(0x198));_0x131652[_0x6c1fac(0x171)]['submissionId']=_0x11b29b[_0x6c1fac(0x196)],_0x131652[_0x6c1fac(0x1ad)]=_0x11b29b[_0x6c1fac(0x16f)],_0x36c88b[_0x6c1fac(0x163)]('.project-number')[_0x6c1fac(0x164)]=_0x11b29b[_0x6c1fac(0x167)],_0x36c88b[_0x6c1fac(0x163)](_0x6c1fac(0x190))['textContent']=_0x11b29b[_0x6c1fac(0x1a3)],_0x36c88b[_0x6c1fac(0x163)](_0x6c1fac(0x1af))[_0x6c1fac(0x164)]=_0x11b29b['studentID'];const _0x33ce73=_0x36c88b[_0x6c1fac(0x163)]('.toggle-details'),_0x363041=_0x33ce73[_0x6c1fac(0x163)]('span'),_0x2887da=_0x36c88b[_0x6c1fac(0x163)]('.delete-submission');_0x2887da['dataset']['id']=_0x11b29b[_0x6c1fac(0x196)],_0x2887da[_0x6c1fac(0x171)][_0x6c1fac(0x172)]=_0x11b29b[_0x6c1fac(0x1a3)],_0x2887da[_0x6c1fac(0x171)][_0x6c1fac(0x19b)]=_0x11b29b[_0x6c1fac(0x167)];const _0x3aea0=_0x3f9f3d[_0x6c1fac(0x16d)][_0x6c1fac(0x189)](!![]),_0x413adc=_0x3aea0[_0x6c1fac(0x163)]('tr');_0x413adc['id']=_0x11e90e;const _0x58af51=_0x413adc[_0x6c1fac(0x163)](_0x6c1fac(0x17c));this[_0x6c1fac(0x176)](_0x11b29b[_0x6c1fac(0x1a4)]||[],_0x58af51),_0x33ce73[_0x6c1fac(0x182)](_0x6c1fac(0x166),_0x3fe099=>{const _0x488890=_0x6c1fac;_0x3fe099[_0x488890(0x1b9)]();const _0x4e6e07=!_0x413adc[_0x488890(0x193)];_0x413adc[_0x488890(0x193)]=_0x4e6e07,_0x363041[_0x488890(0x1bc)](_0x488890(0x17f),_0x4e6e07?_0x488890(0x1ab):_0x488890(0x1a6));}),_0x131652[_0x6c1fac(0x182)](_0x6c1fac(0x1be),async()=>{const _0x3d3732=_0x6c1fac,_0x15615d=_0x131652[_0x3d3732(0x171)][_0x3d3732(0x174)];console[_0x3d3732(0x177)](_0x15615d,_0x131652[_0x3d3732(0x1ad)]),db[_0x3d3732(0x1a8)](_0x15615d,_0x131652['checked']);}),_0x2887da[_0x6c1fac(0x182)](_0x6c1fac(0x166),async _0x37dc43=>{const _0x3c0df2=_0x6c1fac;_0x37dc43[_0x3c0df2(0x1b9)]();const _0x214afa=await this['confirmDelete'](_0x11b29b[_0x3c0df2(0x196)],_0x11b29b);_0x214afa&&(await db[_0x3c0df2(0x16c)](_0x11b29b[_0x3c0df2(0x196)]),this[_0x3c0df2(0x197)]());}),_0x5e4dcb[_0x6c1fac(0x170)](_0x36c88b),_0x5e4dcb['appendChild'](_0x413adc);});}['renderFixesGroupedByFile'](_0x9e48,_0x8d889c){const _0x486fd4=a0_0x1eeaca;_0x8d889c[_0x486fd4(0x18c)]='';if(!_0x9e48[_0x486fd4(0x16b)]){_0x8d889c[_0x486fd4(0x18c)]=_0x486fd4(0x188);return;}const _0x16d147=document[_0x486fd4(0x19a)](_0x486fd4(0x192)),_0x33b90a={};for(const _0x15f5e2 of _0x9e48){(_0x33b90a[_0x15f5e2[_0x486fd4(0x173)]]??=[])[_0x486fd4(0x1b2)](_0x15f5e2);}for(const [_0x2fdc72,_0x45bd44]of Object[_0x486fd4(0x169)](_0x33b90a)){const _0x23bc3a=_0x16d147[_0x486fd4(0x16d)][_0x486fd4(0x189)](!![]);_0x23bc3a[_0x486fd4(0x163)](_0x486fd4(0x184))[_0x486fd4(0x164)]=_0x2fdc72;const _0x54c3fa=_0x23bc3a[_0x486fd4(0x163)]('ul');_0x45bd44[_0x486fd4(0x1a9)](_0x188859=>{const _0x179b93=_0x486fd4,_0x19bcd4=document[_0x179b93(0x18a)]('li');_0x19bcd4[_0x179b93(0x1bd)][_0x179b93(0x181)](_0x179b93(0x18e)),_0x188859['eligiblePoints']===0x0&&_0x19bcd4[_0x179b93(0x1bd)][_0x179b93(0x181)](_0x179b93(0x186)),_0x19bcd4[_0x179b93(0x164)]=_0x179b93(0x185)+_0x188859[_0x179b93(0x194)]+_0x179b93(0x175)+_0x188859[_0x179b93(0x179)]+_0x179b93(0x165)+_0x188859[_0x179b93(0x1b4)],_0x54c3fa[_0x179b93(0x170)](_0x19bcd4);}),_0x8d889c['appendChild'](_0x23bc3a);}}async[a0_0x1eeaca(0x1bf)](_0x45b079,_0x273c3e){const _0x260f41=a0_0x1eeaca,_0x522225='Delete\x20Project\x20'+_0x273c3e[_0x260f41(0x167)]+_0x260f41(0x19f)+_0x273c3e['canvasName']+'?';return new Promise(_0x4b5eb1=>{const _0x11448b=_0x260f41;UIkit[_0x11448b(0x1ae)][_0x11448b(0x1b1)](_0x522225)[_0x11448b(0x199)](()=>_0x4b5eb1(!![]),()=>_0x4b5eb1(![]));});}}const adminUI=new AdmninUI();function a0_0xfe77(_0x3ae293,_0x75b43a){const _0x39759b=a0_0x3975();return a0_0xfe77=function(_0xfe7773,_0x5c0493){_0xfe7773=_0xfe7773-0x163;let _0x5ba218=_0x39759b[_0xfe7773];return _0x5ba218;},a0_0xfe77(_0x3ae293,_0x75b43a);}function a0_0x3975(){const _0x4d8b50=['setAttribute','classList','change','confirmDelete','querySelector','textContent',',\x20eligible\x20','click','projectNumber','submission-details-template','entries','Unauthorized','length','deleteSubmission','content','submission-row-template','graded','appendChild','dataset','name','fileName','submissionId',',\x20deduction\x20','renderFixesGroupedByFile','log','style','deduction','value','filter','.fixes-container','split','5599590AQNRnR','uk-icon','allSubmissions','add','addEventListener','toLowerCase','.file-name','line\x20','uk-text-muted','224AioaEh','<em>No\x20fixes</em>','cloneNode','createElement','1272752gOfQea','innerHTML','177408wswwaV','uk-margin-left','4rKsUUW','.canvas-name','listSubmissions','fix-file-template','hidden','lineNumber','project-filter','$id','renderAdminTable','.submission-checkbox','then','getElementById','projnumber','input','trim','student-filter','\x20submission\x20from\x20','userHasTeam','clear-filters','includes','canvasName','fixes','documentElement','chevron-down','sort','updateSubmissionGraded','forEach','64134lqhRwr','chevron-right','all','checked','modal','.student-id','4657960hSZFvA','confirm','push','student-btn','eligiblePoints','16413363oJQbGR','filteredSubmissions','visible','admin-table-body','preventDefault','1146624yYPpSQ','admin'];a0_0x3975=function(){return _0x4d8b50;};return a0_0x3975();}((async()=>{const _0x4627f8=a0_0x1eeaca,_0x44c8c8=await auth[_0x4627f8(0x1a0)](_0x4627f8(0x1bb));if(!_0x44c8c8){document['documentElement'][_0x4627f8(0x18c)]='<p>401\x20Unauthorized</p>',document['title']=_0x4627f8(0x16a);return;}document[_0x4627f8(0x1a5)][_0x4627f8(0x178)]['visibility']=_0x4627f8(0x1b7),adminUI[_0x4627f8(0x197)]();})());