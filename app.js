function a0_0x35ab(_0x28172d,_0x1db657){const _0x2434be=a0_0x2434();return a0_0x35ab=function(_0x35ab1d,_0x375d67){_0x35ab1d=_0x35ab1d-0xd8;let _0x1276cf=_0x2434be[_0x35ab1d];return _0x1276cf;},a0_0x35ab(_0x28172d,_0x1db657);}const a0_0x5082ef=a0_0x35ab;(function(_0x51252d,_0x4653db){const _0x248f10=a0_0x35ab,_0x55dda7=_0x51252d();while(!![]){try{const _0x4fbe91=parseInt(_0x248f10(0xf9))/0x1+parseInt(_0x248f10(0xf7))/0x2*(parseInt(_0x248f10(0x11e))/0x3)+parseInt(_0x248f10(0x111))/0x4+parseInt(_0x248f10(0x114))/0x5+-parseInt(_0x248f10(0x12c))/0x6+-parseInt(_0x248f10(0xf4))/0x7*(-parseInt(_0x248f10(0x110))/0x8)+-parseInt(_0x248f10(0x123))/0x9;if(_0x4fbe91===_0x4653db)break;else _0x55dda7['push'](_0x55dda7['shift']());}catch(_0x374bd1){_0x55dda7['push'](_0x55dda7['shift']());}}}(a0_0x2434,0x1ae2d));import{authUI}from'./authUI.js';import{auth}from'./auth.js';import{db}from'./submissionService.js';import{StatefulButton}from'./statefulbutton.js';function a0_0x2434(){const _0xad5b5a=['drop','admin-btn','admin.html','log','onAuthStateChange','dragleave','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','signOut','onFilesInput','fixes','deduction','eligible','submitBtn','#prefs-modal','innerHTML','forEach','parseFixes','busy','submit','enableSubmit','sub-status-date-status','adminBtn','toLowerCase','true','studentId','\x20were\x20due\x20on\x20','from','onClick','projectSelectorEl','authSignOut','value','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','appendChild','deductionPtsEl','tableBody','11/18/2025,\x2011:59:00\x20PM','classList','alertDiv','\x20pts','show','projectNumber','preventDefault','files','Fixes\x20for\x20Project\x20','10/21/2025,\x2011:59:00\x20PM','openAuth','dragover','authSignUp','sub-status-eligible','href','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','7dfHYXz','fixed','modal','2GSKKeC','textContent','217393iPjtiq','entries','querySelector','On\x20Time','fileInput','createElement','en-US','getElementById','onSubmit','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20uk-icon=\x22icon:\x20info;\x20ratio:\x201.2\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22help-icon\x20uk-margin-small-left\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uk-tooltip=\x22title:\x20','onclick','length','onPrefsSubmit','remove','12/2/2025,\x2011:59:00\x20PM','openPrefs','onTimeStatusEl','push','addEventListener','eligiblePtsEl','numeric','add','canvasName','503808gRfxEO','84804EzGdzJ','userHasTeam','hidden','299895irFfZO','disabled','admin','split','getUser','sub-status-date','11/4/2025,\x2011:59:00\x20PM','eligiblePoints','Created\x20submission:','clearUIState','340563NffZrx','getPrefs','name','10/7/2025,\x2011:59:00\x20PM','target','1348740VOEtPQ','onProjectChange','click','dropZone','submissionDateEl','hide','signup','updateSubmissionDate','trim','1290510NwIaJT','authSignIn','renderTable','avatar','setPrefs','toLocaleString','.\x20Fixes\x20may\x20be\x20credited\x20at\x20end-of-quarter\x20based\x20on\x20your\x20complete\x20record.','location','match',';\x20pos:\x20left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20&nbsp;Late\x0a\x20\x20\x20\x20\x20\x20\x20\x20','change','lineNumber','text','alert'];a0_0x2434=function(){return _0xad5b5a;};return a0_0x2434();}const fixesDueDates={0x0:a0_0x5082ef(0x121),0x1:a0_0x5082ef(0xed),0x2:a0_0x5082ef(0x11a),0x3:a0_0x5082ef(0xe4),0x4:a0_0x5082ef(0x107)};export class FixerUI{constructor(){const _0x34c10c=a0_0x5082ef;this[_0x34c10c(0x12d)]=document['getElementById']('signIn'),this[_0x34c10c(0xf0)]=document[_0x34c10c(0x100)]('signUp'),this['authSignOut']=document['getElementById'](_0x34c10c(0x141)),this[_0x34c10c(0x12f)]=document[_0x34c10c(0x100)]('userAvatar'),this[_0x34c10c(0xdd)]=document[_0x34c10c(0x100)]('projectField'),this['submissionDateEl']=document[_0x34c10c(0x100)](_0x34c10c(0x119)),this[_0x34c10c(0x109)]=document[_0x34c10c(0x100)](_0x34c10c(0x14e)),this['deductionPtsEl']=document[_0x34c10c(0x100)]('sub-status-deductions'),this['eligiblePtsEl']=document['getElementById'](_0x34c10c(0xf1)),this[_0x34c10c(0x146)]=new StatefulButton(_0x34c10c(0x146)),this[_0x34c10c(0xe6)]=document[_0x34c10c(0x100)](_0x34c10c(0x139)),this[_0x34c10c(0xe3)]=document[_0x34c10c(0x100)](_0x34c10c(0xe3)),this[_0x34c10c(0x14f)]=document[_0x34c10c(0x100)](_0x34c10c(0x13b)),this['authSignIn']['onclick']=()=>authUI[_0x34c10c(0xee)]('signin',()=>this[_0x34c10c(0x13e)]()),this[_0x34c10c(0xf0)][_0x34c10c(0x103)]=()=>authUI[_0x34c10c(0xee)](_0x34c10c(0x129),()=>this['onAuthStateChange']()),this['authSignOut'][_0x34c10c(0x103)]=async()=>{const _0x308df4=_0x34c10c;await auth[_0x308df4(0x141)](),this[_0x308df4(0x13e)]();},this[_0x34c10c(0x12f)][_0x34c10c(0x10b)](_0x34c10c(0x125),()=>this[_0x34c10c(0x108)]()),this['projectSelectorEl'][_0x34c10c(0x10b)](_0x34c10c(0x136),_0x20c3d4=>this[_0x34c10c(0x124)](_0x20c3d4));const _0x1a7ece=document[_0x34c10c(0x100)](_0x34c10c(0xfd));document['getElementById']('uploadBtn')[_0x34c10c(0x10b)]('click',()=>_0x1a7ece['click']()),_0x1a7ece[_0x34c10c(0x10b)](_0x34c10c(0x136),_0x61cb7f=>{const _0x4949f4=_0x34c10c,_0x59e9d1=Array[_0x4949f4(0xdb)](_0x61cb7f['target'][_0x4949f4(0xeb)]);if(_0x59e9d1[_0x4949f4(0x104)])this[_0x4949f4(0x142)](_0x59e9d1);});const _0x4fcfef=document['getElementById'](_0x34c10c(0x126));_0x4fcfef[_0x34c10c(0x10b)]('dragover',_0x38e65f=>{const _0x3c1e08=_0x34c10c;_0x38e65f[_0x3c1e08(0xea)](),_0x4fcfef[_0x3c1e08(0xe5)][_0x3c1e08(0x10e)](_0x3c1e08(0xef));}),_0x4fcfef[_0x34c10c(0x10b)](_0x34c10c(0x13f),()=>{const _0x3f8c82=_0x34c10c;_0x4fcfef[_0x3f8c82(0xe5)][_0x3f8c82(0x106)]('dragover');}),_0x4fcfef[_0x34c10c(0x10b)](_0x34c10c(0x13a),_0x1eb017=>{const _0x3501cf=_0x34c10c;_0x1eb017['preventDefault'](),_0x4fcfef[_0x3501cf(0xe5)]['remove'](_0x3501cf(0xef));const _0x565a69=Array[_0x3501cf(0xdb)](_0x1eb017['dataTransfer'][_0x3501cf(0xeb)]);if(_0x565a69[_0x3501cf(0x104)])this['onFilesInput'](_0x565a69);});const _0x16bcef=document[_0x34c10c(0x100)]('prefs-form');_0x16bcef[_0x34c10c(0x10b)](_0x34c10c(0x14c),_0x255ab3=>{const _0x323a72=_0x34c10c;_0x255ab3['preventDefault'](),this[_0x323a72(0x105)](_0x16bcef);}),this[_0x34c10c(0x146)][_0x34c10c(0xdc)](()=>this[_0x34c10c(0x101)]()),document[_0x34c10c(0x100)](_0x34c10c(0x13b))[_0x34c10c(0x10b)]('click',()=>{const _0x3a7108=_0x34c10c;window[_0x3a7108(0x133)][_0x3a7108(0xf2)]=_0x3a7108(0x13c);}),this[_0x34c10c(0xe9)]=-0x1,this[_0x34c10c(0x143)]=[],this[_0x34c10c(0x13e)](),this[_0x34c10c(0x12a)](),this['enableSubmit']();}async['onAuthStateChange'](){const _0xf197c8=a0_0x5082ef,_0x161a95=await auth[_0xf197c8(0x118)](),_0x13217e=!!_0x161a95;this['authSignIn'][_0xf197c8(0x113)]=_0x13217e,this['authSignUp'][_0xf197c8(0x113)]=_0x13217e,this[_0xf197c8(0xde)]['hidden']=!_0x13217e,this[_0xf197c8(0x12f)][_0xf197c8(0x113)]=!_0x13217e;if(_0x13217e){const _0x5b43c3=await auth[_0xf197c8(0x11f)](),_0x4976d6=_0x5b43c3['canvasName']?.['trim']()['length']>0x0&&_0x5b43c3[_0xf197c8(0xd9)]?.[_0xf197c8(0x12b)]()[_0xf197c8(0x104)]>0x0;!_0x4976d6&&this[_0xf197c8(0x108)]();const _0x3bcb77=await auth[_0xf197c8(0x112)](_0xf197c8(0x116));this[_0xf197c8(0x14f)][_0xf197c8(0x113)]=!_0x3bcb77;}else this[_0xf197c8(0x11d)]();}async[a0_0x5082ef(0x108)](){const _0x43df63=a0_0x5082ef,_0x17afda=await auth['getPrefs']();Object[_0x43df63(0xfa)](_0x17afda)[_0x43df63(0x149)](([_0x35732a,_0xd3270a])=>{const _0x4d59f1=_0x43df63,_0x2cf83f=document[_0x4d59f1(0xfb)]('#prefs-form\x20[name=\x22'+_0x35732a+'\x22]');if(_0x2cf83f)_0x2cf83f[_0x4d59f1(0xdf)]=_0xd3270a??'';}),UIkit[_0x43df63(0xf6)](_0x43df63(0x147))[_0x43df63(0xe8)]();}async[a0_0x5082ef(0x105)](_0x5535df){const _0x15aa11=a0_0x5082ef;UIkit[_0x15aa11(0xf6)](_0x15aa11(0x147))[_0x15aa11(0x128)]();const _0x1593e0=Object['fromEntries'](new FormData(_0x5535df));await auth[_0x15aa11(0x130)](_0x1593e0),this[_0x15aa11(0x14d)]();}async['onSubmit'](){const _0x36c68d=a0_0x5082ef;this['submitBtn'][_0x36c68d(0x14b)]=!![];try{const _0x134e39=await auth[_0x36c68d(0x11f)](),_0x3069e7={'canvasName':_0x134e39['canvasName'][_0x36c68d(0x12b)](),'studentID':_0x134e39[_0x36c68d(0xd9)]['trim'](),'projectNumber':this[_0x36c68d(0xe9)]},_0x1744cb=await db['createSubmission'](_0x3069e7,this[_0x36c68d(0x143)]);console[_0x36c68d(0x13d)](_0x36c68d(0x11c),_0x1744cb);}catch(_0x3c2d8f){console['error']('Create\x20failed:',_0x3c2d8f);}finally{this[_0x36c68d(0x146)][_0x36c68d(0x14b)]=![];}}[a0_0x5082ef(0x11d)](){const _0x43387f=a0_0x5082ef;this[_0x43387f(0xe9)]=-0x1,this[_0x43387f(0x143)]=[],this[_0x43387f(0xdd)][_0x43387f(0xdf)]='',this[_0x43387f(0xe3)]['innerHTML']='',this['submissionDateEl'][_0x43387f(0xf8)]='',this[_0x43387f(0x109)][_0x43387f(0x148)]='-',this[_0x43387f(0xe2)][_0x43387f(0xf8)]='-',this[_0x43387f(0x10c)]['textContent']='-',this['submitBtn'][_0x43387f(0x115)]=!![];}['updateSubmissionDate'](){const _0x255418=a0_0x5082ef,_0x5a0816=new Date();this[_0x255418(0x127)][_0x255418(0xf8)]=_0x5a0816['toLocaleDateString'](_0x255418(0xff),{'month':'short','day':_0x255418(0x10d),'year':'numeric'});let _0x507cf0='-';if(this[_0x255418(0xe9)]>=0x0){const _0x549105=new Date(fixesDueDates[this[_0x255418(0xe9)]]);if(_0x5a0816>_0x549105){const _0x478016=new Date(fixesDueDates[this[_0x255418(0xe9)]])[_0x255418(0x131)](),_0x169cb6=_0x255418(0xec)+this[_0x255418(0xe9)]+_0x255418(0xda)+_0x478016+_0x255418(0x132);_0x507cf0=_0x255418(0x102)+_0x169cb6+_0x255418(0x135);}else _0x507cf0=_0x255418(0xfc);}this[_0x255418(0x109)][_0x255418(0x148)]=_0x507cf0;}async[a0_0x5082ef(0x14d)](){const _0x23d3b8=a0_0x5082ef,_0x59e7c5=await auth['getPrefs'](),_0x558985=_0x59e7c5[_0x23d3b8(0x10f)]?.[_0x23d3b8(0x12b)]()[_0x23d3b8(0x104)]>0x0&&_0x59e7c5[_0x23d3b8(0xd9)]?.[_0x23d3b8(0x12b)]()[_0x23d3b8(0x104)]>0x0,_0x2590cc=!_0x558985||this[_0x23d3b8(0xe9)]<0x0||this['fixes'][_0x23d3b8(0x104)]<=0x0;this[_0x23d3b8(0x146)][_0x23d3b8(0x115)]=_0x2590cc;}[a0_0x5082ef(0x124)](_0x35a170){const _0x4e6063=a0_0x5082ef;this[_0x4e6063(0xe9)]=parseInt(_0x35a170[_0x4e6063(0x122)][_0x4e6063(0xdf)]),this[_0x4e6063(0x12a)](),this[_0x4e6063(0x14d)]();}async[a0_0x5082ef(0x142)](_0x194a21){const _0x46f2fa=a0_0x5082ef;this['fixes']=[];for(const _0xef897f of _0x194a21){const _0x22693c=await this[_0x46f2fa(0x14a)](_0xef897f);this[_0x46f2fa(0x143)][_0x46f2fa(0x10a)](..._0x22693c);}this['renderTable'](),this[_0x46f2fa(0x14d)]();}async['parseFixes'](_0x2cb663){const _0x248e7a=a0_0x5082ef,_0x561264=await _0x2cb663[_0x248e7a(0x138)](),_0xc6cdae=_0x561264[_0x248e7a(0x117)](/\r?\n/),_0xa1f0a9=/\/\/\s*DJH\s*:?\s*(-\d+)\s+([A-Za-z]+)/i,_0x305146=[];return _0xc6cdae[_0x248e7a(0x149)]((_0x3fa91d,_0x5e86b8)=>{const _0x303576=_0x248e7a,_0x46a376=_0x3fa91d[_0x303576(0x134)](_0xa1f0a9);if(_0x46a376){const _0x3655d2=_0x5e86b8+0x1,_0x854b38=Number(_0x46a376[0x1]),_0x43638c=_0x46a376[0x2][_0x303576(0x150)]()==_0x303576(0xf5),_0x5a11b7=_0x43638c?-0x1*_0x854b38:0x0;_0x305146[_0x303576(0x10a)]({'file':_0x2cb663,'lineNumber':_0x3655d2,'deduction':_0x854b38,'eligible':_0x43638c,'eligiblePoints':_0x5a11b7});}}),_0x305146;}[a0_0x5082ef(0x12e)](){const _0x252c4e=a0_0x5082ef;this[_0x252c4e(0xe3)][_0x252c4e(0x148)]='';let _0x94d582=0x0,_0x7991d=0x0;for(const _0x246dea of this[_0x252c4e(0x143)]){const _0x4f2d4e=_0x246dea['file'];_0x94d582+=_0x246dea[_0x252c4e(0x144)],_0x7991d+=_0x246dea['eligible']?_0x246dea[_0x252c4e(0x11b)]:0x0;const _0x3e145b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20uk-icon=\x22icon:\x20info;\x20ratio:\x201.2\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22help-icon\x20uk-margin-small-left\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uk-tooltip=\x22title:\x20To\x20be\x20eligible\x20for\x20credit,\x20deductions\x20that\x20have\x20been\x20fixed\x20must\x20be\x20marked\x20\x27fixed\x27.;\x20pos:\x20right\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1a2e07=_0x246dea[_0x252c4e(0x145)]?_0x252c4e(0xd8):_0x3e145b,_0x29b447=document[_0x252c4e(0xfe)]('tr');_0x29b447[_0x252c4e(0x148)]=_0x252c4e(0x140)+_0x4f2d4e[_0x252c4e(0x120)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x246dea[_0x252c4e(0x137)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x246dea['deduction']+_0x252c4e(0xe0)+_0x1a2e07+_0x252c4e(0xe0)+_0x246dea['eligiblePoints']+_0x252c4e(0xf3),this[_0x252c4e(0xe3)][_0x252c4e(0xe1)](_0x29b447);}this[_0x252c4e(0xe2)][_0x252c4e(0xf8)]=_0x94d582+_0x252c4e(0xe7),this[_0x252c4e(0x10c)][_0x252c4e(0xf8)]=_0x7991d+'\x20pts';}}new FixerUI();